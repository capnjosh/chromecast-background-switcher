<!DOCTYPE html>
<html>
    <head>
        <title>Chromecast Background Switcher - Demo #1</title>
        <style>

            img#background {
                position: absolute;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                z-index: -1;
            }

        </style>
    </head>
    <body>
        <img id="background" src="">

        <script src="http://code.jquery.com/jquery-1.11.0.min.js"></script>
        <script src="http://code.jquery.com/jquery-migrate-1.2.1.min.js"></script>
        <script src="../plugin/chromecast-background-switcher.js"></script>
        <script>

            $(function() {

                // Retrieve list

                $.ajax
                    (
                        '../plugin/chromecast-background-list',
                        {
                            dataType: 'json'
                        }
                    )
                    .done(function(data) {

                        // Initialize switcher

                        chromecastBackgroundSwitcher.init(data, {
                            // If a converter is specified, it executes the converter and returns the image in base64.
                            // If a converter is not specified, it returns a URL which you can access through the url property.
                            converter: '../plugin/chromecast-background-converter.py',
                            // Interval in milliseconds
                            interval: 10000,
                            callback: function(data) {
                                // data contains the following properties: url, success, data.

                                // Check for success. If the converter fails to retrieve the file, it will return false.
                                if (data.success) {
                                    $('img#background').fadeOut(500, function() {
                                        $(this).attr('src', 'data:application/octet-stream;base64,' + data.data).fadeIn(500);
                                    });
                                }

                            }
                        });

                    });

            });

        </script>
    </body>
</html>
